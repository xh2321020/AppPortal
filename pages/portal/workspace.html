<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>个人工作台</title>
    <base  id="baseTag">
    <script>
    location.pagename="portal-workspace";
     function loadScript(url,callback){
        callback=callback?callback:function(){};
        var script=document.createElement("script"); 
        if(script.readyState){//IE
         script.onreadystatechange=function(){ 
        if(script.readyState=="loaded"||script.readyState=="complete"){
        script.onreadystatechange=null; callback(); } };
        }else{//其他浏览器
        script.onload=function(){ callback(); }; } script.src=url; 
        document.body.appendChild(script);
    }

     function loadCss(path){
        if(!path || path.length === 0){
                    throw new Error('argument "path" is required !');
                }
            // var head = document.getElementsByTagName('head')[0];
            var link = document.createElement('link');
            link.href = path;
            link.rel = 'stylesheet';
            document.head.appendChild(link);
     }
        document.getElementById("baseTag").href=location.protocol+"//"+location.host;
        loadCss("assets/css/bootstrap.min.css");
        loadCss("assets/css/portal/workspace.css"); 
        loadCss("assets/css/portal/todotable.css");      
    </script>
</head>
<body> 
<header>
    <com-header></com-header>
</header>
<article class="container-fluid article" id="article">
   <script>
        function changeView(parmar){
            // alert($("#lingdaopishi").val());
            document.getElementById("lingdaopishi").style.display = "none";
            document.getElementById("lingdaopishi").style.display = "none";
            document.getElementById("gongbandaiyue").style.display = "none";
            document.getElementById("gerendaiban").style.display = "none";
            document.getElementById("gongbandaiban").style.display = "none";
            document.getElementById("shoutuodaiban").style.display = "none";
            document.getElementById("gerendaiyue").style.display = "none";
            document.getElementById("weituodaiban").style.display = "none";
            document.getElementById("xiaoxitixing").style.display = "none";

            document.getElementById("lingdaopishiUI").style.backgroundColor = "white";
            document.getElementById("lingdaopishiUI").style.backgroundColor = "white";
            document.getElementById("gongbandaiyueUI").style.backgroundColor = "white";
            document.getElementById("gerendaibanUI").style.backgroundColor = "white";
            document.getElementById("gongbandaibanUI").style.backgroundColor = "white";
            document.getElementById("shoutuodaibanUI").style.backgroundColor = "white";
            document.getElementById("gerendaiyueUI").style.backgroundColor = "white";
            document.getElementById("weituodaibanUI").style.backgroundColor = "white";
            document.getElementById("xiaoxitixingUI").style.backgroundColor = "white";
            // alert(parmar+"UI");
            var uiId = parmar+"UI";
            document.getElementById(uiId).style.backgroundColor = "#f3f2f0";
            document.getElementById(parmar).style.display = "block";
        }
        function getCookie(name)
        {
            var arr,reg=new RegExp("(^| )"+name+"=([^;]*)(;|$)");
            if(arr=document.cookie.match(reg))
                return unescape(arr[2]);
            else
                return null;
        }
        function openLink(title){
            var address="";
            switch(title){
                case "lingdaopishi":
                address="http://bjecm.cnnp.com.cn/cnnpbpm/web/Bamboo.jsp?openExpandNode=leader_comment";
                break;
                case "gongbandaiyue":
                address="http://bjecm.cnnp.com.cn/cnnpbpm/web/Bamboo.jsp?openExpandNode=public_read";
                break; 
                case "gerendaiban":
                address="http://bjecm.cnnp.com.cn/cnnpbpm/web/Bamboo.jsp?openExpandNode=personal";
                break; 
                case "gongbandaiban":
                address="http://bjecm.cnnp.com.cn/cnnpbpm/web/Bamboo.jsp?openExpandNode=commoned";
                break;
                 case "shoutuodaiban":
                address="http://bjecm.cnnp.com.cn/cnnpbpm/web/Bamboo.jsp?openExpandNode=delegated";
                break;
                 case "gerendaiyue":
                address="http://bjecm.cnnp.com.cn/cnnpbpm/web/Bamboo.jsp?openExpandNode=person_read";
                break; 
                case "weituodaiban":
                address="http://10.15.251.35/ecm_into.asp?name="+getCookie("userid");
                break; 
                case "xiaoxitixing":
                address="http://bjecm.cnnp.com.cn/cnnpcomm/page/common/messageUI.jsp?actionType=4";
                break; 
                
            }
            window.open(address,"_blank");
        }
    </script>

    <div class="bodySpace"></div>
    <div class="bodySection" id="bodySection">
        <div  class="bodySectionLeft" style="width:17%">
            <div class="panel-tool-bottom top-section" >
                <div class="bodySectionLeftPortal">
                    <div class="catalog-tools">
                        <span>工作快捷入口</span>
                    </div>
                    <!-- /.catalog -->
                    <ul class="list subject-font" id="gongzuokuaijierukouUl">

                    </ul>
                    <a style="cursor: pointer;">
                        <div class="bodySectionLeftPortalMoreSys" style="color:#337ab7; margin-bottom:1rem;" data-toggle="modal"
                             data-target="#myModal">更多 ></div>
                    </a>

                    <div class="modal fade" id="myModal" tabindex="-1" role="dialog"
                               aria-labelledby="myModalLabel" aria-hidden="true">
                        <div class="modal-dialog" style="min-width:90rem;">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close"
                                            data-dismiss="modal" aria-hidden="true">
                                        &times;
                                    </button>
                                    <h4 class="modal-title" id="myModalLabel">
                                        本站点所有链接
                                    </h4>
                                </div>
                                <div class="modal-body" style="height: 51rem;overflow-y: scroll;">
                                    <ul class="ul-wedigt" id="gongzuokuaijirukouhidePopUl" style="border: 0;height: auto;">

                                    </ul>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-primary" data-toggle="modal"
                                            data-target="#editModal" id="showOpenEditPage">
                                        快捷入口个人配置
                                    </button>
                                    <button type="button" class="btn btn-default"
                                            data-dismiss="modal">关闭
                                    </button>
                                </div>
                            </div><!-- /.modal-content -->
                        </div><!-- /.modal -->
                    </div>
                    <div class="modal fade" id="editModal" tabindex="-1" role="dialog"
                         aria-labelledby="myModalLabel" aria-hidden="true">
                        <div class="modal-dialog" style="min-width:90rem;">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close"
                                            data-dismiss="modal" aria-hidden="true">
                                        &times;
                                    </button>
                                    <h4 class="modal-title" id="editModalLabel">
                                         工作快捷入口个人配置
                                    </h4>
                                </div>
                                <div class="modal-body">
                                    <div class="ws-edit-pop-div"  id="noactionpopview" style="z-index:1; height:50rem;padding-top: 2rem;">
                                        <div style="width:15rem; height: 35rem; float: left; margin-left:19rem;">
                                            <div style="padding-left:25%; margin-bottom:1rem;">个人配置</div>
                                            <select multiple="" id="leftSel" onclick="setButton(this)" ondblclick="document.getElementById('btnRight').click()" style="height:40rem;width:15rem;">

                                            </select>
                                        </div>
                                        <div style="width: 10rem; height: 50rem; float: left; margin-left: 3.5rem; padding-top: 8rem;">
                                            <input type="button" value=" > " id="btnRight" onClick="move(document.getElementById('leftSel'),document.getElementById('rightSel'));" class="ws-edit-pop-div-table-btn-td-input" />
                                            <br />
                                            <br />
                                            <input type="button" value=" < " id="btnLeft" onClick="move(document.getElementById('rightSel'),document.getElementById('leftSel'));" class="ws-edit-pop-div-table-btn-td-input" />
                                            <br />
                                            <br />
                                            <input type="button" value=" >> " id="btnRight" onClick="moveAllLtoR()" class="ws-edit-pop-div-table-btn-td-input" />
                                            <br />
                                            <br />
                                            <input type="button" value=" << " id="btnLeft" onClick="moveAllRtoL()" class="ws-edit-pop-div-table-btn-td-input" />
                                            <br />
                                            <br />
                                            <input type="button" value=" ↑ " id="btnUp" onClick="move(true);" class="ws-edit-pop-div-table-btn-td-input"/>
                                            <br />
                                            <br />
                                            <input type="button" value=" ↓ " id="btnDowm" onClick="move(false);" class="ws-edit-pop-div-table-btn-td-input" />
                                        </div>
                                        <div style="width:15rem; height: 50rem; float: left;">
                                            <div style="padding-left:25%; margin-bottom:1rem;">本站链接</div>
                                            <select multiple="" id="rightSel" onclick="setButton(this)" ondblclick="document.getElementById('btnLeft').click()" style="height:40rem;width:15rem;">

                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    
                                    <button type="button" class="btn btn-primary" id="editConfirmedssss" onClick="submitResultStatus(document.getElementById('leftSel'))">
                                        保存
                                    </button>
                                    <button type="button" class="btn btn-default"
                                            data-dismiss="modal">关闭
                                    </button>
                                </div>
                            </div><!-- /.modal-content -->
                        </div><!-- /.modal -->
                    </div>
                </div>
            </div>
            <div class="bodySectionLeftTool bottom-section" >
                <div class="bodySectionLeftToolDiv">
                    <div class="catalog-tools">
                        <span>跨组织协作工具</span>
                    </div>
                    <!-- /.catalog -->
                    <ul class="list subject-font" id="secondLogin">
                    </ul>
                </div>
            </div>

        </div>
        <div class="bodySectionRight">
            <div class="top-section">
                <div class="panel-tool-bottom-right  default-font">
                    <div class="catalog-tools-right-div">
                        <div class="catalog" style="border-bottom: 1px solid lightgray; width: 98%;">
                            <span>统一待办</span>
                        </div>
                        <!-- /.taskCount-->
                        <div class="task-btntype" style="padding-top:1rem;">
                            <div onclick="openLink('gerendaiban')"  onmouseover="changeView('gerendaiban')"  style="margin-left: 0rem;" class="title-hover">
                                <div class="task-btntype-title">
                                    <span id="gerendaibanSpan">0</span>
                                </div>
                                <div class="task-btntype-subtitle" id="gerendaibanUI" style="background-color:#f3f2f0;">
                                    <span>个人待办</span>
                                </div>
                            </div>
                            <div  onclick="openLink('gongbandaiban')" onmouseover="changeView('gongbandaiban')" class="title-hover">
                                <div class="task-btntype-title">
                                    <span id="gongbandaibanSpan">0</span>
                                </div>
                                <div class="task-btntype-subtitle" id="gongbandaibanUI">
                                    <span>公办待办</span> 
                                </div>
                            </div>
                            <div onclick="openLink('gerendaiyue')" onmouseover="changeView('gerendaiyue')" class="title-hover">
                                <div class="task-btntype-title">
                                    <span id="gerendaiyueSpan">0</span>
                                </div>
                                <div class="task-btntype-subtitle" id="gerendaiyueUI">
                                    <span>个人待阅</span>
                                </div>
                            </div>
                            <div onclick="openLink('gongbandaiyue')"  onmouseover="changeView('gongbandaiyue')" class="title-hover">
                                <div class="task-btntype-title">
                                    <span style="width: 7rem; height: 1rem;" id="gongbandaiyueSpan">0</span>
                                </div>
                                <div class="task-btntype-subtitle" id="gongbandaiyueUI">
                                    <span>公办待阅</span>
                                </div>
                            </div>
                            <div  onclick="openLink('lingdaopishi')"  onmouseover="changeView('lingdaopishi')" class="title-hover">
                                <div class="task-btntype-title">
                                    <span id="lingdaopishiSpan">0</span>
                                </div>
                                <div class="task-btntype-subtitle" id="lingdaopishiUI">
                                    <span>领导批示</span>
                                </div>
                            </div>
                            <div onclick="openLink('weituodaiban')"  onmouseover="changeView('weituodaiban')" class="title-hover">
                                <div class="task-btntype-title">
                                    <span id="weituodaibanSpan">0</span>
                                </div>
                                <div class="task-btntype-subtitle" id="weituodaibanUI">
                                    <span>委托待办</span>
                                </div>
                            </div>
                            <div onclick="openLink('shoutuodaiban')"  onmouseover="changeView('shoutuodaiban')" class="title-hover">
                                <div class="task-btntype-title">
                                    <span id="shoutuodaibanSpan">0</span>
                                </div>
                                <div class="task-btntype-subtitle" id="shoutuodaibanUI">
                                    <span>受托待办</span>
                                </div>
                            </div>
                            <div onclick="openLink('xiaoxitixing')"  onmouseover="changeView('xiaoxitixing')" class="title-hover">
                                <div class="task-btntype-title">
                                    <span id="xiaoxitixingSpan">0</span>
                                </div>
                                <div class="task-btntype-subtitle" id="xiaoxitixingUI">
                                    <span>消息提醒</span>
                                </div>
                            </div>
                        </div>
                        <div style="clear: both;"></div>
                        <div id="backlogSection" >
                            <div  v-if="window.plantName=='FQ-plant'" class="task-btntype task-plus" style="padding-top:1rem;" >
                            <div  v-for="item in list" :style="{marginLeft:$index==0?'0':'1rem'}">
                                <a :href="item.url" style="text-decoration: none;">
                                    <div class="title-hover">
                                        <div class="task-btntype-title">
                                            <span v-text="item.count"></span>
                                        </div>
                                        <div class="task-btntype-subtitle">
                                            <span v-text="item.name"></span>
                                        </div>
                                    </div>
                                </a>
                            </div>
                             <div  v-for="n in 4">
                                <a  style="text-decoration: none;">
                                    <div class="title-hover">
                                        <div class="task-btntype-title">
                                            <span></span>
                                        </div>
                                        <div class="task-btntype-subtitle">
                                            <span ></span>
                                        </div>
                                    </div>
                                </a>
                            </div>
                                                
                        </div>
                        </div>
                            
                        
                        
                        <div style=" height: 80rem;" id="selectData">
                            <!-- 领导批示 find-->
                            <div class="line-tasktype-wedigt" id="lingdaopishi">
                                <div style="width: 100%; height: 3rem; min-width: 48rem;">
                                    <div class="workHalfLineSec-div">
                                        <span class="todoTitle">&nbsp;领导批示&nbsp;</span>
                                    </div>
                                </div>
                                <div id="lingdaopishitable">

                                </div>
                            </div>
                            <!-- 公办待阅 publicread-->
                            <div class="line-tasktype-wedigt" id="gongbandaiyue">
                                <div style="width: 100%; height: 3rem; min-width: 48rem;">
                                    <div class="workHalfLineSec-div">
                                        <span class="todoTitle">&nbsp;公办待阅&nbsp;</span>
                                    </div>
                                </div>
                                <div id="gongbandaiyuetable">

                                </div>
                            </div>
                            <!-- 个人待办 personal-->
                            <div class="line-tasktype-wedigt" id="gerendaiban" style="display: block;">
                                <div style="width: 100%; height: 3rem; min-width: 48rem;">
                                    <div class="workHalfLineSec-div">
                                        <span class="todoTitle">&nbsp;个人待办&nbsp;</span>
                                    </div>
                                </div>
                                <div id="gerendaibantable">
                                        
                                </div>
                            </div>
                            <!-- 公办待办 public-->
                            <div class="line-tasktype-wedigt" id="gongbandaiban">
                                <div style="width: 100%; height: 3rem; min-width: 48rem;">
                                    <div class="workHalfLineSec-div">
                                        <span class="todoTitle">&nbsp;公办待办&nbsp;</span>
                                    </div>
                                </div>
                                <div id="gongbandaibantable">

                                </div>
                            </div>
                            <!-- 受托待办-->
                            <div class="line-tasktype-wedigt" id="shoutuodaiban">
                                <div style="width: 100%; height: 3rem; min-width: 48rem;">
                                    <div class="workHalfLineSec-div">
                                        <span class="todoTitle">&nbsp;受托待办&nbsp;</span>
                                    </div>
                                </div>
                                <div id="shoutuodaibantable">

                                </div>
                            </div>
                            <!-- 个人待阅 personalread-->
                            <div class="line-tasktype-wedigt" id="gerendaiyue">
                                <div style="width: 100%; height: 3rem; min-width: 48rem;">
                                    <div class="workHalfLineSec-div">
                                        <span class="todoTitle">&nbsp;个人待阅&nbsp;</span>
                                    </div>
                                </div>
                                <div id="gerendaiyuetable">

                                </div>
                            </div>
                            <!-- 委托待办-->
                            <div class="line-tasktype-wedigt" id="weituodaiban">
                                <div style="width: 100%; height: 3rem; min-width: 48rem;">
                                    <div class="workHalfLineSec-div">
                                        <span class="todoTitle">&nbsp;委托待办&nbsp;</span>
                                    </div>
                                </div>
                                <div id="weituodaibantable">

                                </div>
                            </div>
                            <!-- 消息提醒-->
                            <div class="line-tasktype-wedigt" id="xiaoxitixing">
                                <div style="width: 100%; height: 3rem; min-width: 48rem;">
                                    <div class="workHalfLineSec-div">
                                        <span class="todoTitle">&nbsp;消息提醒&nbsp;</span>
                                    </div>
                                </div>
                                <div id="xiaoxitixingtable">

                                </div>

                            </div>                           
                        </div>
                    </div>
                </div>
            </div>
            <div class="bodySectionRightCurrentTab bottom-section" style="margin-top:1rem;">
                <div class="bodySectionRightCurentTabTitle">
                    <div class="catalog-tools" style="border: 0; margin-left: 1rem;">
                        <span>近期工作看板</span>
                    </div>
                </div>
                <div style="width: 65%; float: left;">
                    <div style="width: 100%; padding-left: 2rem;">
                        <div style="width: 100%; height: 2rem; min-width: 48rem;">
                            <div class="workHalfLine-div">
                                <span class="workHalfLine-span">今日工作</span>
                            </div>
                        </div>
                        <div class="important-task-title" style="margin-bottom: 0.5rem;">
                            <span class="bodySectionRightCurrentTabSubTitleImp">重点事宜提醒</span>
                            <span class="bodySectionRightCurrentTabSubTitleOverdue">（今日日程、会议、督办等事宜提醒）</span>
                        </div>
                        <!-- data list-->
                        <div class="bodySectionRightMeeting">
                            <ul id="worksoftodayUl">

                            </ul>
                        </div>
                    </div>
                </div>
                <div class="bodySectionRightPlan" style="margin-left: 5%; width: 25%;">
                    <!-- 明日计划-->
                    <div style="height: 50%;">
                        <div style="width: 100%; height: 2rem;">
                            <div class="workHalfLine-div">
                                <span class="workHalfLine-span" id="qirineidubanTitle"></span>
                            </div>
                        </div>

                        <div class="task-item" style="width:100%; min-width:18rem;min-height:10rem;" id="qirineidubanItems">

                        </div>
                    </div>
                    <!-- 后天计划-->
                    <div style="height: 50%; margin-top: 0.5rem;">

                        <div style="width: 100%; height: 2rem;">
                            <div class="workHalfLine-div">
                                <span class="workHalfLine-span" id="qiribeirichengTitle"></span>
                            </div>
                        </div>

                        <div class="task-item" style="width:100%; min-width:18rem;min-height:10rem;" id="qiribeirichengItems">

                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</article>
<footer style="margin-top: 2rem;">
    <com-footer></com-footer>
</footer>
<script>
    var scriptList=['assets/libs/personalpage/portUrl.js','dist/header-footer.js?timestamp='+(new Date().getTime()),'assets/libs/workspace/personalCon.js','assets/libs/workspace/workspacePopView.js'];
    loadScript("assets/libs/vue.min.js");
    loadScript("assets/libs/jquery.min.js",function(){
        loadScript("assets/libs/bootstrap.min.js");
        loadScript("./dist/main.js");
        $(function () {
       
            $("#showPopViw").click(function(ev){
                $("#hidePopView").css("display","block");
            });
            $("#hidePopView").click(function(ev){
                $("#hidePopView").css("display","none");
            });
            $("#closePopView").click(function(ev){
                $("#hidePopView").css("display","none");
            });
            $("#showOpenEditPage").click(function(ev){
                $("#hideEditPopView").css("display","block");
                var currentSelL = null;
                var currentSelR = null;
                currentSelL = document.getElementById('leftSel');
                currentSelR = document.getElementById('rightSel');
                for(var k=0;k<currentSelL.length;k++){
                    for(var j=0; j<currentSelR.length; j++){
                        if (currentSelL.options[k].value == currentSelR.options[j].value){
                            var removeIndex = currentSelR.options[j].index;
                            currentSelR.options.remove(removeIndex);
                        }
                    }
                }
            });

            $("#closeEditPopView").click(function(ev){
                $("#hidePopView").css("display","block");
                $("#hideEditPopView").css("display","none");
            });
            $("#noactionpopview").click(function(ev){
                $("#hideEditPopView").css("display","block");
            });
        });
    });
</script>
<!-- <script src="dist/urlJsonport.js"></script> -->
</body>
</html>